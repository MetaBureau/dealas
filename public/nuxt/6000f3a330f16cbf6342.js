(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{334:function(t,e,n){},335:function(t,e,n){},337:function(t,e,n){"use strict";var r=n(81),o={props:{user:{type:Object,default:function(){}}},computed:{displayName:function(){return Object(r.isNil)(Object(r.get)(this.user,"displayName"))?"":this.user.displayName}}},c=n(69),l=n(96),d=n.n(l),f=n(146),component=Object(c.a)(o,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("v-icon",[this._v("mdi-account")]),this._v(" "+this._s(this.displayName))],1)}),[],!1,null,"df6f968c",null);e.a=component.exports;d()(component,{VIcon:f.a})},339:function(t,e,n){"use strict";n(47);var r,o=n(11),c=n(58),l=n(81),d=n(39),f={computed:{currentUser:function(){return this.$store.getters["auth/getUser"]}},methods:{addVote:(r=Object(o.a)(regeneratorRuntime.mark((function t(e,n){var r,o,l,f,v,h,m,_,x;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.currentUser.loggedIn){t.next=3;break}return this.$router.push("/prisijungti"),t.abrupt("return");case 3:return r=e,o=this.currentUser.data.email,l="".concat(r,"_").concat(o),t.next=8,d.b.collection("votes").doc(l);case 8:return f=t.sent,t.next=11,f.get();case 11:return v=t.sent,t.next=14,d.b.collection("deals").doc(e);case 14:return h=t.sent,t.next=17,h.get();case 17:m=t.sent,_=m.data(),x=0,void 0!==_.score&&(x=_.score),v.exists?(v.data().type!==n&&(f.update({type:n}),x+="upvote"===n?2:-2,h.update({score:x})),this.setScore(r,x)):(f.set({userId:o,dealId:r,type:n}),x+="upvote"===n?1:-1,h.update({votes:c.firestore.FieldValue.arrayUnion(f.id),score:x}),this.setScore(r,x));case 22:case"end":return t.stop()}}),t,this)}))),function(t,e){return r.apply(this,arguments)}),setScore:function(t,e){Object(l.get)(this.$store.state.deals,"deal")?this.$store.dispatch("deals/UPDATE_SCORE",e):this.$store.dispatch("deals/UPDATE_DEAL_SCORE",{dealId:t,score:e})}}},v=n(69),component=Object(v.a)(f,void 0,void 0,!1,null,null,null);e.a=component.exports},373:function(t,e,n){"use strict";var r=n(334);n.n(r).a},375:function(t,e,n){"use strict";var r=n(335);n.n(r).a},398:function(t,e,n){"use strict";n.r(e);n(13),n(8),n(7),n(5),n(9);var r=n(2),o=(n(47),n(11)),c=n(128),l=n(339),d={components:{DisplayNameComponent:n(337).a},mixins:[l.a],props:{deal:{type:Object,default:function(){}}},computed:{discountPercent:function(){return Math.abs(Math.round(100*this.deal.newPrice/this.deal.oldPrice-100,2))},imageCol:function(){return this.deal.image?3:0},descriptionCol:function(){return this.deal.image?9:12}},methods:{navigateToDeal:function(t){this.$router.push({path:"/details/".concat(t)})}}},f=(n(373),n(69)),v=n(96),h=n.n(v),m=n(160),_=n(340),x=n(321),y=n(386),w=n(393),C=n(146),O=n(389),j=n(394),component=Object(f.a)(d,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-hover",{scopedSlots:t._u([{key:"default",fn:function(e){var r=e.hover;return[n("v-card",{staticClass:"deal-card d-flex flex-column",attrs:{height:"100%",elevation:r?12:3},on:{click:function(e){return t.navigateToDeal(t.deal.id)}}},[n("v-card-title",{attrs:{"primary-title":""}},[n("div",{staticClass:"subtitle-2 text-break"},[t._v("\n          "+t._s(t.deal.title)+"\n        ")])]),t._v(" "),n("v-card-text",{staticClass:"d-flex flex-column flex-grow-1"},[n("v-row",[t.deal.image?n("v-col",{staticClass:"d-flex flex-column text--center",attrs:{cols:t.imageCol,lg:"12",xs12:""}},[n("div",{staticClass:"flex-grow-1 align-self-center"},[n("img",{staticClass:"deal-image",attrs:{src:t.deal.image,width:"100%"}})])]):t._e(),t._v(" "),n("v-col",{staticClass:"d-flex flex-column",attrs:{cols:t.descriptionCol,lg:"12",xs12:""}},[n("div",{staticClass:"caption"},[t._v("\n              "+t._s(t._f("truncate")(t.deal.description,100))+"\n            ")])])],1),t._v(" "),n("div",{staticClass:"d-flex justify-space-between"},[n("div",[n("DisplayNameComponent",{attrs:{user:t.deal.user}})],1),t._v(" "),n("div",[n("v-tooltip",{attrs:{top:""},scopedSlots:t._u([{key:"activator",fn:function(e){var r=e.on;return[n("span",t._g({staticClass:"caption"},r),[t._v("\n                  -"+t._s(t.discountPercent)+"%\n                ")])]}}],null,!0)},[t._v(" "),n("span",[t._v("Sena kaina: € "+t._s(t.deal.oldPrice))])]),t._v(" "),n("span",{staticClass:"body-1  green--text darken-2 font-weight-medium"},[t._v("\n              €"+t._s(t.deal.newPrice)+"\n            ")])],1)]),t._v(" "),n("div",{staticClass:"d-flex align-center justify-space-between"},[n("div"),t._v(" "),n("div",[n("span",{staticClass:"font-weight-medium pl-1 pr-1"},[n("v-btn",{attrs:{text:"",icon:""},on:{click:function(e){return e.stopPropagation(),t.addVote(t.deal.id,"downvote")}}},[n("v-icon",{attrs:{color:"blue"}},[t._v("mdi-minus")])],1)],1),t._v("\n            "+t._s(t.deal.score)+"\n            "),n("span",{staticClass:"font-weight-medium pl-1 pr-1"},[n("v-btn",{attrs:{text:"",icon:""},on:{click:function(e){return e.stopPropagation(),t.addVote(t.deal.id,"upvote")}}},[n("v-icon",{attrs:{color:"red"}},[t._v("mdi-plus")])],1)],1)])])],1),t._v(" "),null!==t.deal.endsAt?n("v-card-actions",{staticClass:"text-center justify-center overline font-weight-thin grey--text"},[n("div",{},[t._v("Galioja iki "+t._s(t.deal.endsAt))])]):t._e()],1)]}}])})}),[],!1,null,"28275a21",null),k=component.exports;function P(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}h()(component,{VBtn:m.a,VCard:_.a,VCardActions:x.a,VCardText:x.b,VCardTitle:x.c,VCol:y.a,VHover:w.a,VIcon:C.a,VRow:O.a,VTooltip:j.a});var D,V={components:{DealCard:k},fetch:(D=Object(o.a)(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.store.dispatch("deals/GET_DEALS");case 2:case"end":return t.stop()}}),t)}))),function(t){return D.apply(this,arguments)}),data:function(){return{searchInput:null,debounce:null}},computed:function(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?P(Object(source),!0).forEach((function(e){Object(r.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):P(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}({},Object(c.b)("deals",{searchDeals:"getDeals"}),{searchedDeals:function(){return this.searchDeals(this.searchInput)}}),methods:{debounceSearch:function(t){var e=this;clearTimeout(this.debounce),this.debounce=setTimeout((function(){e.searchInput=t}),600)}},head:function(){return{title:"Dealas - puslapis kuriame rasite nuolaida sau!",meta:[{hid:"description",name:"description",content:"Puslapis kuriame rasite aktualių nuolaidų kuriomis dalinasi platformoje besilankantys lankytojai."}],noscript:[{innerHTML:"Body No Scripts",body:!0}],script:[]}}},S=(n(375),n(338)),E=Object(f.a)(V,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("v-row",[e("v-col",{staticClass:"d-flex flex-column",attrs:{xs:"12",lg:"12",xs12:""}},[e("div",[e("v-text-field",{attrs:{label:"Paieska",placeholder:"Pradėkite paiešką...","single-line":"",clearable:"",solo:"","persistent-hint":"",light:"","hide-details":""},on:{input:this.debounceSearch}})],1)])],1),this._v(" "),e("v-row",{staticClass:"pt-5"},this._l(this.searchedDeals,(function(t){return e("v-col",{key:t.id,attrs:{cols:"12",sm:"6",md:"4",lg:"3"}},[e("DealCard",{attrs:{deal:t}})],1)})),1)],1)}),[],!1,null,"726226a8",null);e.default=E.exports;h()(E,{VCol:y.a,VRow:O.a,VTextField:S.a})}}]);